/*!
 * @license Firebase v4.10.0
 * Build: rev-fc81427
 * Terms: https://firebase.google.com/terms/
 */
try{webpackJsonpFirebase([3],{116:function(e,t,r){r(117)},117:function(e,t,r){"use strict";function o(e){var t=new Uint8Array(e);return window.btoa(String.fromCharCode.apply(null,t))}function n(){}function i(e){var t=function(e){return self&&"ServiceWorkerGlobalScope"in self?new j(e):new M(e)},r={Messaging:M};e.INTERNAL.registerService("messaging",t,r)}Object.defineProperty(t,"__esModule",{value:!0});var s,c=r(0),a={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",TOKEN_UNSUBSCRIBE_FAILED:"token-unsubscribe-failed",TOKEN_UPDATE_FAILED:"token-update-failed",TOKEN_UPDATE_NO_TOKEN:"token-update-no-token",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key",INVALID_PUBLIC_VAPID_KEY:"invalid-public-vapid-key",USE_PUBLIC_KEY_BEFORE_GET_TOKEN:"use-public-key-before-get-token",PUBLIC_KEY_DECRYPTION_FAILED:"public-vapid-key-decryption-failed"},u=(s={},s[a.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",s[a.AVAILABLE_IN_SW]="This method is available in a service worker context.",s["should-be-overriden"]="This method should be overriden by extended classes.",s["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",s["permission-default"]="The required permissions were not granted and dismissed instead.",s["permission-blocked"]="The required permissions were not granted and blocked instead.",s["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",s["notifications-blocked"]="Notifications have been blocked.",s[a.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",s["sw-registration-expected"]="A service worker registration was the expected input.",s["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",s["invalid-saved-token"]="Unable to access details of the saved token.",s["sw-reg-redundant"]="The service worker being used for push was made redundant.",s["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",s["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",s["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",s["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$message}",s["token-update-failed"]="A problem occured while updating the user from FCM: {$message}",s["token-update-no-token"]="FCM returned no token when updating the user to push.",s["use-sw-before-get-token"]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",s["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",s["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",s["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",s["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",s["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",s["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",s["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",s["failed-to-delete-token"]="Unable to delete the currently saved token.",s["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",s["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",s["bad-scope"]="The service worker scope must be a string with at least one character.",s["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",s["bad-subscription"]="The subscription must be a valid PushSubscription.",s["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",s["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",s["failed-delete-vapid-key"]="The VAPID key could not be deleted.",s["invalid-public-vapid-key"]="The public VAPID key must be a string.",s[a.PUBLIC_KEY_DECRYPTION_FAILED]="The public VAPID key did not equal 65 bytes when decrypted.",s),_={codes:a,map:u},d=function(){function e(e,t){this.e=new c.ErrorFactory("messaging","Messaging",_.map),this.t=e,this.r=t,this.o=null,this.TRANSACTION_READ_WRITE="readwrite"}return e.prototype.openDatabase=function(){var e=this;return this.o?this.o:(this.o=new Promise(function(t,r){var o=indexedDB.open(e.t,e.r);o.onerror=function(e){r(e.target.error)},o.onsuccess=function(e){t(e.target.result)},o.onupgradeneeded=function(t){try{var o=t.target.result;e.onDBUpgrade(o)}catch(e){o.close(),r(e)}}}),this.o)},e.prototype.closeDatabase=function(){var e=this;return Promise.resolve().then(function(){if(e.o)return e.o.then(function(t){t.close(),e.o=null})})},e.prototype.onDBUpgrade=function(e){throw this.e.create(_.codes.SHOULD_BE_INHERITED)},e}(),p=d,f=function(e){return o(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},h=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),l=1;n.prototype.fcmToken,n.prototype.swScope,n.prototype.vapidKey,n.prototype.subscription,n.prototype.fcmSenderId,n.prototype.fcmPushSet;var g=function(e){function t(){return e.call(this,t.DB_NAME,l)||this}return h(t,e),Object.defineProperty(t,"DB_NAME",{get:function(){return"fcm_token_details_db"},enumerable:!0,configurable:!0}),t.prototype.onDBUpgrade=function(e){var t=e.createObjectStore("fcm_token_object_Store",{keyPath:"swScope"});t.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),t.createIndex("fcmToken","fcmToken",{unique:!0})},t.prototype.n=function(e){return!e.fcmToken||"string"==typeof e.fcmToken&&0!==e.fcmToken.length?!e.swScope||"string"==typeof e.swScope&&0!==e.swScope.length?!e.vapidKey||e.vapidKey instanceof Uint8Array&&65===e.vapidKey.length?!e.subscription||e.subscription instanceof PushSubscription?!e.fcmSenderId||"string"==typeof e.fcmSenderId&&0!==e.fcmSenderId.length?!e.fcmPushSet||"string"==typeof e.fcmPushSet&&0!==e.fcmPushSet.length?Promise.resolve():Promise.reject(this.e.create(_.codes.BAD_PUSH_SET)):Promise.reject(this.e.create(_.codes.BAD_SENDER_ID)):Promise.reject(this.e.create(_.codes.BAD_SUBSCRIPTION)):Promise.reject(this.e.create(_.codes.BAD_VAPID_KEY)):Promise.reject(this.e.create(_.codes.BAD_SCOPE)):Promise.reject(this.e.create(_.codes.BAD_TOKEN))},t.prototype.getTokenDetailsFromToken=function(e){var t=this;return e?this.n({fcmToken:e}).then(function(){return t.openDatabase()}).then(function(t){return new Promise(function(r,o){var n=t.transaction(["fcm_token_object_Store"]),i=n.objectStore("fcm_token_object_Store"),s=i.index("fcmToken"),c=s.get(e);c.onerror=function(e){o(e.target.error)},c.onsuccess=function(e){var t=e.target.result?e.target.result:null;r(t)}})}):Promise.reject(this.e.create(_.codes.BAD_TOKEN))},t.prototype.getTokenDetailsFromSWScope=function(e){var t=this;return e?this.n({swScope:e}).then(function(){return t.openDatabase()}).then(function(t){return new Promise(function(r,o){var n=t.transaction(["fcm_token_object_Store"]),i=n.objectStore("fcm_token_object_Store"),s=i.get(e);s.onerror=function(e){o(e.target.error)},s.onsuccess=function(e){var t=e.target.result?e.target.result:null;r(t)}})}):Promise.reject(this.e.create(_.codes.BAD_SCOPE))},t.prototype.saveTokenDetails=function(e){var t=this,r=e.swScope,o=e.vapidKey,n=e.subscription,i=e.fcmSenderId,s=e.fcmToken,c=e.fcmPushSet;return r?o?n?i?s?c?this.n({swScope:r,vapidKey:o,subscription:n,fcmSenderId:i,fcmToken:s,fcmPushSet:c}).then(function(){return t.openDatabase()}).then(function(e){var a={swScope:r,vapidKey:f(o),endpoint:n.endpoint,auth:f(n.getKey("auth")),p256dh:f(n.getKey("p256dh")),fcmSenderId:i,fcmToken:s,fcmPushSet:c,createTime:Date.now()};return new Promise(function(r,o){var n=e.transaction(["fcm_token_object_Store"],t.TRANSACTION_READ_WRITE),i=n.objectStore("fcm_token_object_Store"),s=i.put(a);s.onerror=function(e){o(e.target.error)},s.onsuccess=function(e){r()}})}):Promise.reject(this.e.create(_.codes.BAD_PUSH_SET)):Promise.reject(this.e.create(_.codes.BAD_TOKEN)):Promise.reject(this.e.create(_.codes.BAD_SENDER_ID)):Promise.reject(this.e.create(_.codes.BAD_SUBSCRIPTION)):Promise.reject(this.e.create(_.codes.BAD_VAPID_KEY)):Promise.reject(this.e.create(_.codes.BAD_SCOPE))},t.prototype.deleteToken=function(e){var t=this;return"string"!=typeof e||0===e.length?Promise.reject(this.e.create(_.codes.INVALID_DELETE_TOKEN)):this.getTokenDetailsFromToken(e).then(function(e){if(!e)throw t.e.create(_.codes.DELETE_TOKEN_NOT_FOUND);return t.openDatabase().then(function(r){return new Promise(function(o,n){var i=r.transaction(["fcm_token_object_Store"],t.TRANSACTION_READ_WRITE),s=i.objectStore("fcm_token_object_Store"),c=s.delete(e.swScope);c.onerror=function(e){n(e.target.error)},c.onsuccess=function(r){if(0===r.target.result)return void n(t.e.create(_.codes.FAILED_TO_DELETE_TOKEN));o(e)}})})})},t}(p),E=g,T=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),b=1,S=function(e){function t(){return e.call(this,t.DB_NAME,b)||this}return T(t,e),Object.defineProperty(t,"DB_NAME",{get:function(){return"fcm_vapid_details_db"},enumerable:!0,configurable:!0}),t.prototype.onDBUpgrade=function(e){e.createObjectStore("fcm_vapid_object_Store",{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return"string"!=typeof e||0===e.length?Promise.reject(this.e.create(_.codes.BAD_SCOPE)):this.openDatabase().then(function(t){return new Promise(function(r,o){var n=t.transaction(["fcm_vapid_object_Store"]),i=n.objectStore("fcm_vapid_object_Store"),s=i.get(e);s.onerror=function(){o(s.error)},s.onsuccess=function(){var e=s.result,t=null;e&&(t=e.vapidKey),r(t)}})})},t.prototype.saveVapidDetails=function(e,t){var r=this;if("string"!=typeof e||0===e.length)return Promise.reject(this.e.create(_.codes.BAD_SCOPE));if(null===t||65!==t.length)return Promise.reject(this.e.create(_.codes.BAD_VAPID_KEY));var o={swScope:e,vapidKey:t};return this.openDatabase().then(function(e){return new Promise(function(t,n){var i=e.transaction(["fcm_vapid_object_Store"],r.TRANSACTION_READ_WRITE),s=i.objectStore("fcm_vapid_object_Store"),c=s.put(o);c.onerror=function(){n(c.error)},c.onsuccess=function(){t()}})})},t.prototype.deleteVapidDetails=function(e){var t=this;return this.getVapidFromSWScope(e).then(function(r){if(!r)throw t.e.create(_.codes.DELETE_SCOPE_NOT_FOUND);return t.openDatabase().then(function(o){return new Promise(function(n,i){var s=o.transaction(["fcm_vapid_object_Store"],t.TRANSACTION_READ_WRITE),c=s.objectStore("fcm_vapid_object_Store"),a=c.delete(e);a.onerror=function(){i(a.error)},a.onsuccess=function(){if(0===a.result)return void i(t.e.create(_.codes.FAILED_DELETE_VAPID_KEY));n(r)}})})})},t}(p),y=S,m=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),v={userVisibleOnly:!0,applicationServerKey:m},D={DEFAULT_PUBLIC_VAPID_KEY:m,SUBSCRIPTION_DETAILS:v,ENDPOINT:"https://fcm.googleapis.com"},I=function(){function e(){this.e=new c.ErrorFactory("messaging","Messaging",_.map)}return e.prototype.getToken=function(e,t,r){var o=this,n=f(t.getKey("p256dh")),i=f(t.getKey("auth")),s="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+n+"&encryption_auth="+i;r!==D.DEFAULT_PUBLIC_VAPID_KEY&&(s+="&application_pub_key="+f(r));var c=new Headers;c.append("Content-Type","application/x-www-form-urlencoded");var a={method:"POST",headers:c,body:s};return fetch(D.ENDPOINT+"/fcm/connect/subscribe",a).then(function(e){return e.json()}).catch(function(){throw o.e.create(_.codes.TOKEN_SUBSCRIBE_FAILED)}).then(function(e){var t=e;if(t.error){var r=t.error.message;throw o.e.create(_.codes.TOKEN_SUBSCRIBE_FAILED,{message:r})}if(!t.token)throw o.e.create(_.codes.TOKEN_SUBSCRIBE_NO_TOKEN);if(!t.pushSet)throw o.e.create(_.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);return{token:t.token,pushSet:t.pushSet}})},e.prototype.updateToken=function(e,t,r,o,n){var i=this,s=f(o.getKey("p256dh")),c=f(o.getKey("auth")),a="push_set="+r+"&token="+t+"&authorized_entity="+e+"&endpoint="+o.endpoint+"&encryption_key="+s+"&encryption_auth="+c;n!==D.DEFAULT_PUBLIC_VAPID_KEY&&(a+="&application_pub_key="+f(n));var u=new Headers;u.append("Content-Type","application/x-www-form-urlencoded");var d,p={method:"POST",headers:u,body:a};return fetch(D.ENDPOINT+"/fcm/connect/subscribe",p).then(function(e){return d=e,e.json()}).catch(function(){throw i.e.create(_.codes.TOKEN_UPDATE_FAILED)}).then(function(e){if(!d.ok){var t=e.error.message;throw i.e.create(_.codes.TOKEN_UPDATE_FAILED,{message:t})}if(!e.token)throw i.e.create(_.codes.TOKEN_UPDATE_NO_TOKEN);return e.token})},e.prototype.deleteToken=function(e,t,r){var o=this,n="authorized_entity="+e+"&token="+t+"&pushSet="+r,i=new Headers;i.append("Content-Type","application/x-www-form-urlencoded");var s={method:"POST",headers:i,body:n};return fetch(D.ENDPOINT+"/fcm/connect/unsubscribe",s).then(function(e){if(!e.ok)return e.json().then(function(e){if(e.error){var t=e.error.message;throw o.e.create(_.codes.TOKEN_UNSUBSCRIBE_FAILED,{message:t})}},function(e){throw o.e.create(_.codes.TOKEN_UNSUBSCRIBE_FAILED)})})},e}(),k=I,P="messagingSenderId",w=function(){function e(e){var t=this;if(this.e=new c.ErrorFactory("messaging","Messaging",_.map),!e.options[P]||"string"!=typeof e.options[P])throw this.e.create(_.codes.BAD_SENDER_ID);this.i=e.options[P],this.s=new E,this.c=new y,this.a=new k,this.app=e,this.INTERNAL={},this.INTERNAL.delete=function(){return t.delete()}}return e.prototype.getToken=function(){var e=this,t=this.u();if("granted"!==t)return"denied"===t?Promise.reject(this.e.create(_.codes.NOTIFICATIONS_BLOCKED)):Promise.resolve(null);var r;return this._().then(function(t){return r=t,e.s.getTokenDetailsFromSWScope(r.scope)}).then(function(t){return t?e.manageExistingToken(t,r):e.getNewToken(r)})},e.prototype.manageExistingToken=function(e,t){var r=this;return this.isTokenStillValid(e).then(function(o){return o?Date.now()<e.createTime+6048e5?e.fcmToken:r.updateToken(e,t):r.deleteToken(e.fcmToken).then(function(){return r.getNewToken(t)})})},e.prototype.isTokenStillValid=function(e){return this.d().then(function(t){return f(t)===e.vapidKey})},e.prototype.updateToken=function(e,t){var r,o,n,i=this;return this.d().then(function(e){return r=e,i.p(t,r)}).then(function(t){return n=t,i.a.updateToken(i.i,e.fcmToken,e.fcmPushSet,n,r)}).catch(function(t){return i.deleteToken(e.fcmToken).then(function(){throw t})}).then(function(s){o=s;var c={swScope:t.scope,vapidKey:r,subscription:n,fcmSenderId:i.i,fcmToken:o,fcmPushSet:e.fcmPushSet};return i.s.saveTokenDetails(c)}).then(function(){return i.c.saveVapidDetails(t.scope,r)}).then(function(){return o})},e.prototype.getNewToken=function(e){var t,r,o,n=this;return this.d().then(function(r){return t=r,n.p(e,t)}).then(function(e){return r=e,n.a.getToken(n.i,r,t)}).then(function(i){o=i;var s={swScope:e.scope,vapidKey:t,subscription:r,fcmSenderId:n.i,fcmToken:o.token,fcmPushSet:o.pushSet};return n.s.saveTokenDetails(s)}).then(function(){return n.c.saveVapidDetails(e.scope,t)}).then(function(){return o.token})},e.prototype.deleteToken=function(e){var t=this;return this.s.deleteToken(e).then(function(e){return t.a.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet)}).then(function(){return t._().then(function(e){if(e)return e.pushManager.getSubscription()}).then(function(e){if(e)return e.unsubscribe()})})},e.prototype._=function(){throw this.e.create(_.codes.SHOULD_BE_INHERITED)},e.prototype.d=function(){throw this.e.create(_.codes.SHOULD_BE_INHERITED)},e.prototype.requestPermission=function(){throw this.e.create(_.codes.AVAILABLE_IN_WINDOW)},e.prototype.p=function(e,t){throw this.e.create(_.codes.AVAILABLE_IN_WINDOW)},e.prototype.useServiceWorker=function(e){throw this.e.create(_.codes.AVAILABLE_IN_WINDOW)},e.prototype.usePublicVapidKey=function(e){throw this.e.create(_.codes.AVAILABLE_IN_WINDOW)},e.prototype.onMessage=function(e,t,r){throw this.e.create(_.codes.AVAILABLE_IN_WINDOW)},e.prototype.onTokenRefresh=function(e,t,r){throw this.e.create(_.codes.AVAILABLE_IN_WINDOW)},e.prototype.setBackgroundMessageHandler=function(e){throw this.e.create(_.codes.AVAILABLE_IN_SW)},e.prototype.delete=function(){return Promise.all([this.s.closeDatabase(),this.c.closeDatabase()])},e.prototype.u=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.s},e.prototype.getVapidDetailsModel=function(){return this.c},e.prototype.getIIDModel=function(){return this.a},e}(),A=w,N={TYPE_OF_MSG:"firebase-messaging-msg-type",DATA:"firebase-messaging-msg-data"},O={PUSH_MSG_RECEIVED:"push-msg-received",NOTIFICATION_CLICKED:"notification-clicked"},F=function(e,t){return r={},r[N.TYPE_OF_MSG]=e,r[N.DATA]=t,r;var r},R={PARAMS:N,TYPES_OF_MSG:O,createNewMsg:F},C={path:"/firebase-messaging-sw.js",scope:"/firebase-cloud-messaging-push-scope"},B=function(e){for(var t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),o=window.atob(r),n=new Uint8Array(o.length),i=0;i<o.length;++i)n[i]=o.charCodeAt(i);return n},L=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),U=function(e){function t(t){var r=e.call(this,t)||this;return r.f=null,r.h=Object(c.createSubscribe)(function(e){r.f=e}),r.l=null,r.g=Object(c.createSubscribe)(function(e){r.l=e}),r.T,r.b,r.f=null,r.h=Object(c.createSubscribe)(function(e){r.f=e}),r.l=null,r.g=Object(c.createSubscribe)(function(e){r.l=e}),r.S(),r}return L(t,e),t.prototype.getToken=function(){var t=this;return this.y()?this.m().then(function(){return e.prototype.getToken.call(t)}):Promise.reject(this.e.create(_.codes.UNSUPPORTED_BROWSER))},t.prototype.m=function(){var e=this;if(this.b)return this.b;var t=document.querySelector('link[rel="manifest"]');return this.b=t?fetch(t.href).then(function(e){return e.json()}).catch(function(){return Promise.resolve()}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw e.e.create(_.codes.INCORRECT_GCM_SENDER_ID)}):Promise.resolve(),this.b},t.prototype.requestPermission=function(){var e=this;return"granted"===Notification.permission?Promise.resolve():new Promise(function(t,r){var o=function(o){return"granted"===o?t():r("denied"===o?e.e.create(_.codes.PERMISSION_BLOCKED):e.e.create(_.codes.PERMISSION_DEFAULT))},n=Notification.requestPermission(o);n&&n.then(o)})},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw this.e.create(_.codes.SW_REGISTRATION_EXPECTED);if(void 0!==this.T)throw this.e.create(_.codes.USE_SW_BEFORE_GET_TOKEN);this.T=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw this.e.create(_.codes.INVALID_PUBLIC_VAPID_KEY);if(void 0!==this.v)throw this.e.create(_.codes.USE_PUBLIC_KEY_BEFORE_GET_TOKEN);var t=B(e);if(65!==t.length)throw this.e.create(_.codes.PUBLIC_KEY_DECRYPTION_FAILED);this.v=t},t.prototype.onMessage=function(e,t,r){return this.h(e,t,r)},t.prototype.onTokenRefresh=function(e,t,r){return this.g(e,t,r)},t.prototype.D=function(e){var t=this,r=e.installing||e.waiting||e.active;return new Promise(function(o,n){if(!r)return void n(t.e.create(_.codes.NO_SW_IN_REG));if("activated"===r.state)return void o(e);if("redundant"===r.state)return void n(t.e.create(_.codes.SW_REG_REDUNDANT));var i=function(){if("activated"===r.state)o(e);else{if("redundant"!==r.state)return;n(t.e.create(_.codes.SW_REG_REDUNDANT))}r.removeEventListener("statechange",i)};r.addEventListener("statechange",i)})},t.prototype._=function(){var e=this;return this.T?this.D(this.T):(this.T=null,navigator.serviceWorker.register(C.path,{scope:C.scope}).catch(function(t){throw e.e.create(_.codes.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:t.message})}).then(function(t){return e.D(t).then(function(){return e.T=t,t.update(),t})}))},t.prototype.d=function(){return this.v?Promise.resolve(this.v):Promise.resolve(D.DEFAULT_PUBLIC_VAPID_KEY)},t.prototype.p=function(e,t){return e.pushManager.getSubscription().then(function(r){return r||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})})},t.prototype.S=function(){var e=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[R.PARAMS.TYPE_OF_MSG]){var r=t.data;switch(r[R.PARAMS.TYPE_OF_MSG]){case R.TYPES_OF_MSG.PUSH_MSG_RECEIVED:case R.TYPES_OF_MSG.NOTIFICATION_CLICKED:var o=r[R.PARAMS.DATA];e.f&&e.f.next(o)}}},!1)},t.prototype.y=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},t}(A),M=U,K=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),W=function(e){function t(t){var r=e.call(this,t)||this;return self.addEventListener("push",function(e){return r.I(e)},!1),self.addEventListener("pushsubscriptionchange",function(e){return r.k(e)},!1),self.addEventListener("notificationclick",function(e){return r.P(e)},!1),r.w=null,r}return K(t,e),t.prototype.I=function(e){var t,r=this;try{t=e.data.json()}catch(e){return}var o=this.A().then(function(e){if(e){if(t.notification||r.w)return r.N(t)}else{var o=r.O(t);if(o){var n=o.title||"";return r._().then(function(e){return e.showNotification(n,o)})}if(r.w)return r.w(t)}});e.waitUntil(o)},t.prototype.k=function(e){var t=this,r=this._().then(function(e){return e.pushManager.getSubscription().then(function(e){}).catch(function(r){return t.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope).then(function(e){if(!e)throw r;return t.deleteToken(e.fcmToken).then(function(){throw r})})})}).catch(function(e){throw t.e.create(_.codes.UNABLE_TO_RESUBSCRIBE,{message:e})});e.waitUntil(r)},t.prototype.P=function(e){var t=this;if(e.notification&&e.notification.data&&e.notification.data.FCM_MSG){e.stopImmediatePropagation(),e.notification.close();var r=e.notification.data.FCM_MSG;if(r.notification){var o=r.notification.click_action;if(o){var n=this.F(o).then(function(e){return e?e.focus():self.clients.openWindow(o)}).then(function(e){if(e){r.notification,delete r.notification;var o=R.createNewMsg(R.TYPES_OF_MSG.NOTIFICATION_CLICKED,r);return t.R(e,o)}});e.waitUntil(n)}}}},t.prototype.O=function(e){if(e&&"object"==typeof e.notification){var t=Object.assign({},e.notification);return t.data=(r={},r.FCM_MSG=e,r),t;var r}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw this.e.create(_.codes.BG_HANDLER_FUNCTION_EXPECTED);this.w=e},t.prototype.F=function(e){var t=new URL(e,self.location).href;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){for(var r=null,o=0;o<e.length;o++)if(new URL(e[o].url,self.location).href===t){r=e[o];break}return r||null})},t.prototype.R=function(e,t){return e?(e.postMessage(t),Promise.resolve()):Promise.reject(this.e.create(_.codes.NO_WINDOW_CLIENT_TO_MSG))},t.prototype.A=function(){return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){return e.some(function(e){return"visible"===e.visibilityState})})},t.prototype.N=function(e){var t=this;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(r){var o=R.createNewMsg(R.TYPES_OF_MSG.PUSH_MSG_RECEIVED,e);return Promise.all(r.map(function(e){return t.R(e,o)}))})},t.prototype._=function(){return Promise.resolve(self.registration)},t.prototype.d=function(){var e=this;return this._().then(function(t){return e.getVapidDetailsModel().getVapidFromSWScope(t.scope)}).then(function(e){return null===e?D.DEFAULT_PUBLIC_VAPID_KEY:e})},t}(A),j=W,V=r(6);t.registerMessaging=i,i(V.firebase)}},[116])}catch(e){throw Error("Cannot instantiate firebase-messaging.js - be sure to load firebase-app.js first.")}
//# sourceMappingURL=firebase-messaging.js.map